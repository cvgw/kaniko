language: go
os: linux
dist: bionic
env:
  - IMAGE_REPO=localhost:5000
go:
  - "1.13.3"
go_import_path: github.com/GoogleContainerTools/kaniko
jobs:
  include:
    - script:
      - make test
    - script:
      - ./travis-integration-suite-setup.sh
      - ./integration-test.sh -run TestRun
    - script:
      - ./travis-integration-suite-setup.sh
      - ./integration-test.sh -run TestGitBuildcontext
    - script:
      - ./travis-integration-suite-setup.sh
      - ./integration-test.sh -run TestLayers
    - script:
      - ./travis-integration-suite-setup.sh
      - ./integration-test.sh -run TestCache
    - script:
      - ./travis-integration-suite-setup.sh
      - ./integration-test.sh -run TestRelativePaths
    - stage: build-images
      script:
        - make images
